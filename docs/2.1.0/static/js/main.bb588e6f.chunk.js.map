{"version":3,"sources":["Selected.tsx","Selector.tsx","Setting.tsx","Configure.tsx","DataDrivenParameter.tsx","Home.tsx","index.tsx"],"names":["Selected","props","react","className","selecting","selected","tableau_ui_min","onClick","onClear","style","visibility","nextConfig","marginLeft","displayName","Selector","dropdownSelectProps","disabled","enabled","kind","onChange","onSelect","value","buttonProps","list","map","option","key","Setting","config","Selected_Selected","Selector_Selector","renderSelectElement","tableau","window","Loading","Configure","state","allLabel","applyButton","applyButtonLabel","autoUpdate","bg","configured","dataType","delimiter","displayField","field","field_config","field_enabled","field_list","updateOnSelectionFix","includeAllValue","listenParam","listenParamName","listenParamList","matchParam","multiselect","param_config","param_enabled","param_list","parameter","selectedTabIndex","showDisplayValues","sort","txt","updateOnChange","useFormattedValues","worksheet","ws_config","ws_enabled","ws_list","bgChange","color","_this","setState","target","txtChange","paramChange","e","listenParameter","fieldChange","wsChange","sortChange","textInputChange","Object","defineProperty","name","checkboxChange","checked","listInputChange","tabChange","index","setParam","dashboard","extensions","dashboardContent","findParameterAsync","then","param","populateWS","clearParam","populateParamList","setWS","populateFieldList","clearWS","setField","worksheets","find","w","getSummaryDataAsync","dataTable","dropdownList","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","columns","Symbol","iterator","next","done","f","push","fieldName","err","return","clearField","submit","settings","set","saveAsync","ui","closeDialog","clearSettings","_this2","this","getAll","selParam","allowableValues","type","testWSSettings","_this3","getParametersAsync","params","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","p","length","ws","selWorksheet","testFieldSettings","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_this4","column","selField","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_this5","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_this6","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","includes","_this7","initializeDialogAsync","testParamSettings","panels","Setting_Setting","margin","flexGrow","marginRight","display","width","children","maxLength","backgroundColor","xmlns","id","height","viewBox","x","y","fillRule","clipRule","fill","d","activation","alignment","onTabChange","tabs","content","React","unregister","NeedsConfiguring","displayValue","fakeWhiteOverlay","hex","rgb","result","exec","b","parseInt","g","r","hexToRgb","concat","Math","min","floor","DataDrivenParameter","currentVal","firstInit","configure","popupUrl","location","origin","process","displayDialogAsync","closePayload","setup","catch","error","get","errorCode","ErrorCodes","DialogClosedByUser","console","log","message","getParamData","ignoreSelection","populateParam","setCurrentValue","tablist","_loop","v","toString","currentValue","split","changeValueAsync","join","matchListener","updateParam","newValue","values","options","opt","apply","resetListeners","createList","data","row","formattedValue","filter","item","array","indexOf","i","a","Number","toLocaleString","environment","locale","unshift","addEventListener","TableauEventType","FilterChanged","MarkSelectionChanged","ParameterChanged","updateParameter","fn","registerListeners","document","body","findParameter","initializeAsync","multi","flexDirection","multiple","marginTop","single","fontSize","Home","href","PrimaryLayout","react_router","path","exact","component","App","react_router_dom","src_PrimaryLayout","ReactDOM","src_App","getElementById"],"mappings":"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","file":"static/js/main.bb588e6f.chunk.js","sourcesContent":["import * as React from 'react';\r\nimport { Button } from '@tableau/tableau-ui';\r\n\r\nexport interface SelectedProps {\r\n    nextConfig?: boolean;\r\n    onClear: () => void;\r\n    selected: string;\r\n    selecting: string;\r\n}\r\n\r\n// An individual setting that has been set\r\nexport const Selected: React.SFC<SelectedProps> = (props) => {\r\n    return (\r\n        <div className='selected'>\r\n            <p><i>The {props.selecting} <b>{props.selected}</b> has been selected</i></p>\r\n            <Button onClick={props.onClear} style={{ visibility: props.nextConfig ? 'hidden' : 'visible', marginLeft: '12px' }}>Clear</Button>\r\n        </div>\r\n    );\r\n};\r\n\r\nSelected.displayName = 'Selected';\r\n","import * as React from 'react';\r\nimport { Button, ButtonProps, DropdownSelect, DropdownSelectProps } from '@tableau/tableau-ui';\r\n\r\nexport interface SelectorProps {\r\n    enabled: boolean;\r\n    list: string[];\r\n    onChange: (e: React.ChangeEvent<HTMLSelectElement>) => void;\r\n    onClick: () => void;\r\n    selected: string;\r\n}\r\n\r\n// Shows if setting has not yet been configured\r\nexport const Selector: React.SFC<SelectorProps> = (props) => {\r\n    const dropdownSelectProps: DropdownSelectProps = {\r\n        className: 'dropdown-select',\r\n        disabled: !props.enabled,\r\n        kind: 'line',\r\n        onChange: props.onChange,\r\n        onSelect: props.onChange,\r\n        value: props.selected,\r\n    };\r\n\r\n    const buttonProps: ButtonProps = {\r\n        disabled: !props.enabled || props.selected === '',\r\n        kind: 'filledGreen',\r\n        onClick: props.onClick,\r\n        style: { marginLeft: '12px' },\r\n    };\r\n\r\n    return (\r\n        <div className='selector'>\r\n            <DropdownSelect {...dropdownSelectProps}>\r\n                {props.list.map(option => <option key={option}>{option}</option>)}\r\n            </DropdownSelect>\r\n            <Button {...buttonProps}>Set</Button>\r\n        </div>\r\n    );\r\n};\r\n\r\nSelector.displayName = 'Selector';\r\n","import * as React from 'react';\r\nimport { Selected } from './Selected';\r\nimport { Selector } from './Selector';\r\n\r\nexport interface SettingProps {\r\n    config: boolean;\r\n    enabled: boolean;\r\n    list: string[];\r\n    nextConfig?: boolean;\r\n    onChange: (e: React.ChangeEvent<HTMLSelectElement>) => void;\r\n    onClear: () => void;\r\n    onClick: () => void;\r\n    selected: string;\r\n    selecting: string;\r\n}\r\n\r\nexport const Setting: React.SFC<SettingProps> = (props) => {\r\n    return (\r\n        <React.Fragment>\r\n            <span>Select a {props.selecting}</span>\r\n            {renderSelectElement(props)}\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nSetting.displayName = 'Setting';\r\n\r\nfunction renderSelectElement(props: SettingProps): JSX.Element {\r\n    const { config, enabled, list, nextConfig, onChange, onClear, onClick, selected, selecting } = props;\r\n\r\n    return config ? <Selected nextConfig={nextConfig} onClear={onClear} selected={selected} selecting={selecting} /> :\r\n        <Selector enabled={enabled} list={list} onChange={onChange} onClick={onClick} selected={selected} />;\r\n}\r\n","import * as React from 'react';\r\nimport { Button, Checkbox, DropdownSelect, Radio, Tabs, TextField } from '@tableau/tableau-ui';\r\nimport { Setting } from './Setting';\r\nconst tableau = window.tableau;\r\n\r\ninterface State {\r\n    allLabel: string,\r\n    applyButton: boolean,\r\n    applyButtonLabel: string,\r\n    autoUpdate: boolean,\r\n    bg: string,\r\n    configured: boolean,\r\n    dataType: string,\r\n    delimiter: string,\r\n    displayField: string,\r\n    field: string,\r\n    field_config: boolean,\r\n    field_enabled: boolean,\r\n    field_list: string[],\r\n    updateOnSelectionFix: boolean,\r\n    includeAllValue: boolean,\r\n    listenParam: boolean,\r\n    listenParamName: string,\r\n    listenParamList: string[],\r\n    matchParam: boolean,\r\n    multiselect: boolean,\r\n    param_config: boolean,\r\n    param_enabled: boolean,\r\n    param_list: string[],\r\n    parameter: string,\r\n    selectedTabIndex: number;\r\n    showDisplayValues: boolean,\r\n    sort: string,\r\n    txt: string,\r\n    updateOnChange: boolean,\r\n    useFormattedValues: boolean,\r\n    worksheet: string,\r\n    ws_config: boolean,\r\n    ws_enabled: boolean,\r\n    ws_list: string[],\r\n}\r\n\r\nconst Loading: string = 'Loading...';\r\nconst NoFieldsFound: string = 'No fields found that match parameter!';\r\nconst NoWorksheetsFound: string = 'No worksheets found!';\r\nconst NoParametersFound: string = 'No open input parameters found!';\r\n\r\nclass Configure extends React.Component<any, State> {\r\n    public readonly state: State = {\r\n        allLabel: '(All)',\r\n        applyButton: false,\r\n        applyButtonLabel: 'Apply',\r\n        autoUpdate: false,\r\n        bg: '#ffffff',\r\n        configured: false,\r\n        dataType: 'string',\r\n        delimiter: '|',\r\n        displayField: '',\r\n        field: '',\r\n        field_config: false,\r\n        field_enabled: false,\r\n        field_list: [],\r\n        updateOnSelectionFix: false,\r\n        includeAllValue: false,\r\n        listenParam: false,\r\n        listenParamName: '',\r\n        listenParamList: [],\r\n        matchParam: false,\r\n        multiselect: false,\r\n        param_config: false,\r\n        param_enabled: false,\r\n        param_list: [],\r\n        parameter: '',\r\n        selectedTabIndex: 0,\r\n        showDisplayValues: false,\r\n        sort: 'asc',\r\n        txt: '#333333',\r\n        updateOnChange: false,\r\n        useFormattedValues: false,\r\n        worksheet: '',\r\n        ws_config: false,\r\n        ws_enabled: false,\r\n        ws_list: [],\r\n    };\r\n\r\n    // Handles change in background color input\r\n    public bgChange = (color: any): void => {\r\n        this.setState({ bg: color.target.value });\r\n    };\r\n\r\n    // Handles change in text color input\r\n    public txtChange = (color: any): void => {\r\n        this.setState({ txt: color.target.value });\r\n    };\r\n\r\n    // Handles selection in parameter dropdown\r\n    public paramChange = (e: React.ChangeEvent<HTMLSelectElement>): void => {\r\n        this.setState({ parameter: e.target.value }, this.listenParameter);\r\n    };\r\n\r\n    // Handles selection in field dropdown\r\n    public fieldChange = (e: React.ChangeEvent<HTMLSelectElement>): void => {\r\n        this.setState({ field: e.target.value });\r\n    };\r\n\r\n    // Handles selection in worksheet dropdown\r\n    public wsChange = (e: React.ChangeEvent<HTMLSelectElement>): void => {\r\n        this.setState({ worksheet: e.target.value });\r\n    };\r\n\r\n    // Handles change in sort checkbox\r\n    public sortChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n        this.setState({ sort: e.target.value });\r\n    };\r\n\r\n    // Handles change in delimiter textbox\r\n    public textInputChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n        this.setState({ [e.target.name]: e.target.value } as any);\r\n    };\r\n\r\n    // Handles change in auto update checkbox\r\n    public checkboxChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n        this.setState({ [e.target.name]: e.target.checked } as any);\r\n    };\r\n\r\n    // Handles selection in display values dropdown\r\n    public listInputChange = (e: React.ChangeEvent<HTMLSelectElement>): void => {\r\n        this.setState({ [e.target.name]: e.target.value } as any);\r\n    };\r\n\r\n    // Handles change in options tabs   \r\n    public tabChange = (index: any): void => {\r\n        this.setState({ selectedTabIndex: index });\r\n    };\r\n\r\n    // Tests if extension is configured and if so, if the parameter in settings exists and accepts all values\r\n    public testParamSettings() {\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        const settings = tableau.extensions.settings.getAll();\r\n        if (this.state.configured) {\r\n            dashboard.findParameterAsync(settings.selParam).then((param: any) => {\r\n                if (param && param.allowableValues.type === 'all') {\r\n                    this.setState({\r\n                        dataType: param.dataType,\r\n                        param_config: true,\r\n                        parameter: param.name,\r\n                    }, this.listenParameter);\r\n                    this.testWSSettings();\r\n                } else {\r\n                    this.populateParamList();\r\n                    this.setState({ configured: false });\r\n                }\r\n            })\r\n        } else {\r\n            this.populateParamList();\r\n        }\r\n    }\r\n\r\n    // Gets list of parameters in workbook and populates dropdown\r\n    public populateParamList() {\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        this.setState({\r\n            param_list: [Loading],\r\n            parameter: Loading,\r\n        });\r\n        dashboard.getParametersAsync().then((params: any) => {\r\n            const dropdownList: string[] = [];\r\n            for (const p of params) {\r\n                if (p.allowableValues.type === 'all') {\r\n                    dropdownList.push(p.name);\r\n                }\r\n            }\r\n            dropdownList.sort();\r\n            if (dropdownList.length > 0) {\r\n                this.setState({\r\n                    param_enabled: true,\r\n                    param_list: dropdownList,\r\n                    parameter: dropdownList[0],\r\n                }, this.listenParameter);\r\n            } else {\r\n                this.setState({\r\n                    param_enabled: false,\r\n                    param_list: [NoParametersFound],\r\n                    parameter: NoParametersFound,\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // Sets which tableau parameter to update\r\n    public setParam = (): void => {\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        if (this.state.parameter !== '') {\r\n            dashboard.findParameterAsync(this.state.parameter).then((param: any) => {\r\n                this.setState({\r\n                    dataType: param.dataType,\r\n                    includeAllValue: (param.dataType === 'string' ? this.state.includeAllValue : false),\r\n                    multiselect: (param.dataType === 'string' ? this.state.multiselect : false),\r\n                    param_config: true,\r\n                });\r\n                this.populateWS();\r\n            });\r\n        }\r\n    }\r\n\r\n    // Clears setting for which tableau parameter to update\r\n    public clearParam = (): void => {\r\n        this.setState({\r\n            param_config: false,\r\n            param_enabled: true,\r\n            ws_enabled: false,\r\n        });\r\n        this.populateParamList();\r\n    }\r\n\r\n    // Tests if extension is configured and if so, if the worksheet in settings exists\r\n    public testWSSettings() {\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        const settings = tableau.extensions.settings.getAll();\r\n        if (this.state.configured) {\r\n            if (dashboard.worksheets.find((ws: any) => ws.name === settings.selWorksheet)) {\r\n                this.setState({\r\n                    worksheet: settings.selWorksheet,\r\n                    ws_config: true,\r\n                    ws_enabled: false,\r\n                });\r\n                this.testFieldSettings();\r\n            } else {\r\n                this.populateWS();\r\n                this.setState({ configured: false });\r\n            }\r\n        } else {\r\n            this.populateWS();\r\n        }\r\n    }\r\n\r\n    // Gets list of worksheets in dashboard and populates dropdown\r\n    public populateWS() {\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        this.setState({\r\n            worksheet: Loading,\r\n            ws_list: [Loading],\r\n        });\r\n        const dropdownList: string[] = [];\r\n        for (const ws of dashboard.worksheets) {\r\n            dropdownList.push(ws.name);\r\n        }\r\n        dropdownList.sort();\r\n        if (dropdownList.length > 0) {\r\n            this.setState({\r\n                worksheet: dropdownList[0],\r\n                ws_enabled: true,\r\n                ws_list: dropdownList,\r\n            });\r\n        } else {\r\n            this.setState({\r\n                worksheet: NoWorksheetsFound,\r\n                ws_enabled: false,\r\n                ws_list: [NoWorksheetsFound],\r\n            });\r\n        }\r\n    }\r\n\r\n    // Sets which worksheet to use for filters\r\n    public setWS = (): void => {\r\n        if (this.state.worksheet !== '') {\r\n            this.setState({ ws_config: true });\r\n            this.populateFieldList();\r\n        }\r\n    }\r\n\r\n    // Clears setting for which worksheet to use for filters\r\n    public clearWS = (): void => {\r\n        this.setState({\r\n            field_enabled: false,\r\n            ws_config: false,\r\n            ws_enabled: true,\r\n        });\r\n        this.populateWS();\r\n    }\r\n\r\n    // Tests if extension is configued and if so, if the field in settings exists on the selected worksheet\r\n    public testFieldSettings() {\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        const settings = tableau.extensions.settings.getAll();\r\n        if (this.state.configured) {\r\n            dashboard.worksheets.find((w: any) => w.name === this.state.worksheet).getSummaryDataAsync().then((dataTable: any) => {\r\n                if (dataTable.columns.find((column: any) => column.fieldName === settings.selField)) {\r\n                    const dropdownList: string[] = [];\r\n                    for (const f of dataTable.columns) {\r\n                        dropdownList.push(f.fieldName);\r\n                    }\r\n                    dropdownList.sort();\r\n                    this.setState({\r\n                        configured: true,\r\n                        field: settings.selField,\r\n                        field_config: true,\r\n                        field_enabled: false,\r\n                        field_list: dropdownList,\r\n                    });\r\n                } else {\r\n                    this.populateFieldList();\r\n                    this.setState({ configured: false });\r\n                }\r\n            });\r\n        } else {\r\n            this.populateFieldList();\r\n        }\r\n    }\r\n\r\n    // Gets list of fields in previously selected worksheet's data and populates dropdown\r\n    public populateFieldList() {\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        this.setState({\r\n            field: Loading,\r\n            field_list: [Loading],\r\n        });\r\n        let dataType: string;\r\n        dashboard.findParameterAsync(this.state.parameter).then((param: any) => {\r\n            dataType = param.dataType;\r\n            return dashboard.worksheets.find((w: any) => w.name === this.state.worksheet).getSummaryDataAsync();\r\n        })\r\n            .then((dataTable: any) => {\r\n                const dropdownList: string[] = [];\r\n                for (const f of dataTable.columns) {\r\n                    if (f.dataType === dataType) {\r\n                        dropdownList.push(f.fieldName);\r\n                    }\r\n                }\r\n                dropdownList.sort();\r\n                if (dropdownList.length > 0) {\r\n                    this.setState({\r\n                        field: dropdownList[0],\r\n                        field_enabled: true,\r\n                        field_list: dropdownList,\r\n                    });\r\n                } else {\r\n                    this.setState({\r\n                        field: NoFieldsFound,\r\n                        field_enabled: false,\r\n                        field_list: [NoFieldsFound],\r\n                    });\r\n                }\r\n            });\r\n    }\r\n\r\n    // Sets the field to pull values from for Data-Driven Parameter\r\n    public setField = (): void => {\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        if (this.state.field !== '') {\r\n            this.setState({\r\n                configured: true,\r\n                field_config: true,\r\n            });\r\n        }\r\n\r\n        // For display values list\r\n        dashboard.worksheets.find((w: any) => w.name === this.state.worksheet).getSummaryDataAsync().then((dataTable: any) => {\r\n            const dropdownList: string[] = [];\r\n            for (const f of dataTable.columns) {\r\n                dropdownList.push(f.fieldName);\r\n            }\r\n            dropdownList.sort();\r\n            this.setState({\r\n                displayField: dropdownList[0],\r\n                field_list: dropdownList,\r\n            });\r\n        });\r\n    }\r\n\r\n    // Clears the field to pull values from for Data-Driven Parameter\r\n    public clearField = (): void => {\r\n        this.setState({\r\n            configured: false,\r\n            field_config: false,\r\n            field_enabled: true,\r\n        });\r\n        this.populateFieldList();\r\n    }\r\n\r\n    // Saves settings and closes configure dialog\r\n    public submit = (): void => {\r\n        tableau.extensions.settings.set('allLabel', this.state.allLabel);\r\n        tableau.extensions.settings.set('applyButton', this.state.applyButton && this.state.multiselect);\r\n        tableau.extensions.settings.set('applyButtonLabel', this.state.applyButtonLabel);\r\n        tableau.extensions.settings.set('autoUpdate', this.state.autoUpdate);\r\n        tableau.extensions.settings.set('bg', this.state.bg);\r\n        tableau.extensions.settings.set('configured', 'true');\r\n        tableau.extensions.settings.set('dataType', this.state.dataType || 'string');\r\n        tableau.extensions.settings.set('delimiter', this.state.delimiter);\r\n        tableau.extensions.settings.set('displayField', this.state.displayField);\r\n        tableau.extensions.settings.set('includeAllValue', this.state.includeAllValue && this.state.dataType === 'string');\r\n        tableau.extensions.settings.set('listenParam', this.state.listenParam);\r\n        tableau.extensions.settings.set('listenParamName', this.state.listenParamName || '');\r\n        tableau.extensions.settings.set('matchParam', this.state.matchParam);\r\n        tableau.extensions.settings.set('multiselect', this.state.multiselect && this.state.dataType === 'string');\r\n        tableau.extensions.settings.set('selField', this.state.field);\r\n        tableau.extensions.settings.set('selParam', this.state.parameter);\r\n        tableau.extensions.settings.set('selWorksheet', this.state.worksheet);\r\n        tableau.extensions.settings.set('showDisplayValues', this.state.showDisplayValues);\r\n        tableau.extensions.settings.set('sort', this.state.sort);\r\n        tableau.extensions.settings.set('txt', this.state.txt);\r\n        tableau.extensions.settings.set('updateOnChange', this.state.updateOnChange);\r\n        tableau.extensions.settings.set('updateOnSelectionFix', this.state.updateOnSelectionFix);\r\n        tableau.extensions.settings.set('useFormattedValues', this.state.useFormattedValues && this.state.dataType === 'string');\r\n        tableau.extensions.settings.saveAsync().then(() => {\r\n            tableau.extensions.ui.closeDialog(this.state.worksheet);\r\n        });\r\n    }\r\n\r\n    // Clears settings and states\r\n    public clearSettings = (): void => {\r\n        this.setState({\r\n            configured: false,\r\n            displayField: '',\r\n            field: '',\r\n            field_config: false,\r\n            field_enabled: false,\r\n            field_list: [],\r\n            param_config: false,\r\n            param_list: [],\r\n            parameter: '',\r\n            showDisplayValues: false,\r\n            worksheet: '',\r\n            ws_config: false,\r\n            ws_enabled: false,\r\n            ws_list: [],\r\n        });\r\n        this.populateParamList();\r\n    }\r\n\r\n    // Grab parameters for options\r\n    public listenParameter() {\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        dashboard.getParametersAsync().then((params: any) => {\r\n            const dropdownList: string[] = [];\r\n            for (const p of params) {\r\n                if (p.name !== this.state.parameter) {\r\n                    dropdownList.push(p.name);\r\n                }\r\n            }\r\n            dropdownList.sort();\r\n\r\n            this.setState({\r\n                listenParamList: dropdownList,\r\n                listenParamName: dropdownList.includes(this.state.listenParamName) ? this.state.listenParamName : dropdownList[0]\r\n            });\r\n        });\r\n    }\r\n\r\n    // Once we have mounted, we call to initialize\r\n    public componentWillMount() {\r\n        tableau.extensions.initializeDialogAsync().then(() => {\r\n            const settings = tableau.extensions.settings.getAll();\r\n            if (settings.configured === 'true') {\r\n                this.setState({\r\n                    allLabel: settings.allLabel || '(All)',\r\n                    applyButton: settings.applyButton === 'true' || false,\r\n                    applyButtonLabel: settings.applyButtonLabel || 'Apply',\r\n                    autoUpdate: settings.autoUpdate === 'true' || false,\r\n                    bg: settings.bg || '#ffffff',\r\n                    configured: true,\r\n                    dataType: settings.dataType,\r\n                    delimiter: settings.delimiter || '|',\r\n                    displayField: settings.displayField || '',\r\n                    includeAllValue: settings.includeAllValue === 'true' || false,\r\n                    listenParam: settings.listenParam === 'true' || false,\r\n                    listenParamName: settings.listenParamName || '',\r\n                    matchParam: settings.matchParam === 'true' || false,\r\n                    multiselect: settings.multiselect === 'true' || false,\r\n                    showDisplayValues: settings.showDisplayValues === 'true' || false,\r\n                    sort: settings.sort || 'asc',\r\n                    txt: settings.txt || '#333333',\r\n                    updateOnChange: settings.updateOnChange === 'true' || false,\r\n                    updateOnSelectionFix: settings.updateOnSelectionFix ? settings.updateOnSelectionFix === 'true' || false : true,\r\n                    useFormattedValues: settings.useFormattedValues === 'true' || false,\r\n                });\r\n                this.testParamSettings();\r\n            } else {\r\n                this.populateParamList();\r\n            }\r\n        });\r\n    }\r\n\r\n    public render() {\r\n        const configuration = <div className='content'>\r\n            <Setting selecting='parameter' onClick={this.setParam} onClear={this.clearParam} config={this.state.param_config} nextConfig={this.state.ws_config} selected={this.state.parameter} enabled={this.state.param_enabled && !this.state.param_config} list={this.state.param_list} onChange={this.paramChange} />\r\n            <Setting selecting='worksheet' onClick={this.setWS} onClear={this.clearWS} config={this.state.ws_config} nextConfig={this.state.field_config} selected={this.state.worksheet} enabled={this.state.ws_enabled} list={this.state.ws_list} onChange={this.wsChange} />\r\n            <Setting selecting='field' onClick={this.setField} onClear={this.clearField} config={this.state.field_config} selected={this.state.field} enabled={this.state.field_enabled} list={this.state.field_list} onChange={this.fieldChange} />\r\n        </div>;\r\n\r\n        const options = <div className='content'>\r\n            <div className='option'>\r\n                Sorting:\r\n                <Radio checked={this.state.sort === 'asc'} onChange={this.sortChange} name='sorting' value='asc' style={{ margin: '0px 12px' }}>Ascending (A-Z)</Radio>\r\n                <Radio checked={this.state.sort === 'desc'} onChange={this.sortChange} name='sorting' value='desc' style={{ margin: '0px 12px' }}>Descending (Z-A)</Radio>\r\n            </div>\r\n            <div className='option'>\r\n                <Checkbox name='updateOnSelectionFix' checked={this.state.updateOnSelectionFix} onChange={this.checkboxChange} style={{ flexGrow: 1 }}>Filter list based on worksheet selections</Checkbox>\r\n            </div>\r\n            <div className='option'>\r\n                <Checkbox name='autoUpdate' checked={this.state.autoUpdate} onChange={this.checkboxChange} style={{ flexGrow: 1 }}>Automatically reset values on dashboard load.</Checkbox>\r\n            </div>\r\n            <div className='option'>\r\n                <Checkbox name='updateOnChange' disabled={this.state.multiselect} checked={this.state.updateOnChange} onChange={this.checkboxChange} style={{ flexGrow: 1 }}>Update list of values after selection is made. (Dropdown only)</Checkbox>\r\n            </div>\r\n            <div className='option'>\r\n                <Checkbox name='matchParam' checked={this.state.matchParam} onChange={this.checkboxChange} style={{ flexGrow: 1 }}>Update selection if source parameter changes.</Checkbox>\r\n            </div>\r\n            <div className='option'>\r\n                <Checkbox name='listenParam' disabled={!this.state.param_config} checked={this.state.listenParam} onChange={this.checkboxChange} style={{ marginRight: '10px' }}>Update list when a parameter changes.</Checkbox>\r\n                <div style={{ display: 'flex', width: '150px' }}>\r\n                    <DropdownSelect name='listenParamName' className='dropdown-select' disabled={!this.state.listenParam || !this.state.param_config} kind='line' onChange={this.listInputChange} value={this.state.listenParamName} style={{ flexGrow: 1 }}>\r\n                        {this.state.listenParamList.map(option => <option key={option}>{option}</option>)}\r\n                    </DropdownSelect>\r\n                </div>\r\n            </div>\r\n            <div className='option'>\r\n                <Checkbox name='showDisplayValues' disabled={!this.state.field_config} checked={this.state.showDisplayValues} onChange={this.checkboxChange} style={{ marginRight: '10px' }}>Use different field for display values</Checkbox>\r\n                <div style={{ display: 'flex', width: '150px' }}>\r\n                    <DropdownSelect name='displayField' className='dropdown-select' disabled={!this.state.showDisplayValues || !this.state.field_config} kind='line' onChange={this.listInputChange} value={this.state.displayField} style={{ flexGrow: 1 }}>\r\n                        {this.state.field_list.map(option => <option key={option}>{option}</option>)}\r\n                    </DropdownSelect>\r\n                </div>\r\n            </div>\r\n            <div className='option'>\r\n                <p><i>For use with string parameters only:</i></p>\r\n            </div>\r\n            <div className='option'>\r\n                <Checkbox name='useFormattedValues' disabled={this.state.dataType !== 'string'} checked={this.state.useFormattedValues && this.state.dataType === 'string'} onChange={this.checkboxChange} style={{ flexGrow: 1 }}>Use aliased values</Checkbox>\r\n            </div>\r\n            <div className='option'>\r\n                <Checkbox name='includeAllValue' disabled={this.state.dataType !== 'string'} checked={this.state.includeAllValue && this.state.dataType === 'string'} onChange={this.checkboxChange} style={{ marginRight: '10px' }}>Include \"(All)\" in parameter list</Checkbox>\r\n                <span children='Label:' style={{ marginRight: '5px', color: this.state.dataType !== 'string' || !this.state.includeAllValue ? 'rgba(0, 0, 0, 0.35)' : 'inherit' }} />\r\n                <TextField name='allLabel' kind='line' onChange={this.textInputChange} className='delimiter-text-field' value={this.state.allLabel} disabled={this.state.dataType !== 'string' || !this.state.includeAllValue} maxLength={20} style={{ width: 150 }} />\r\n\r\n            </div>\r\n            <p style={{ marginLeft: '20px' }}><i>Note: This is only a placeholder for calculations.</i></p>\r\n            <div className='option'>\r\n                <Checkbox name='multiselect' disabled={this.state.dataType !== 'string'} checked={this.state.multiselect && this.state.dataType === 'string'} onChange={this.checkboxChange} style={{ marginRight: '10px' }}>Allow for multiple selections.</Checkbox>\r\n                <span children='Delimiter:' style={{ marginRight: '5px', color: !this.state.multiselect ? 'rgba(0, 0, 0, 0.35)' : 'inherit' }} />\r\n                <TextField name='delimiter' kind='line' onChange={this.textInputChange} className='delimiter-text-field' value={this.state.delimiter} disabled={!this.state.multiselect || this.state.dataType !== 'string'} maxLength={1} style={{ width: 20 }} />\r\n            </div>\r\n            <div className='option'>\r\n                <Checkbox name='applyButton' disabled={!this.state.multiselect} checked={this.state.applyButton && this.state.multiselect} onChange={this.checkboxChange} style={{ marginRight: '10px' }}>Show apply button.</Checkbox>\r\n                <span children='Label:' style={{ marginRight: '5px', color: !this.state.multiselect || !this.state.applyButton ? 'rgba(0, 0, 0, 0.35)' : 'inherit' }} />\r\n                <TextField name='applyButtonLabel' kind='line' onChange={this.textInputChange} className='delimiter-text-field' value={this.state.applyButtonLabel} disabled={!this.state.multiselect || !this.state.applyButton} maxLength={20} style={{ width: 150 }} />\r\n            </div>\r\n        </div>;\r\n\r\n        const formatting = <div className='content'>\r\n            <div className='format'>\r\n                <div className='formattext'>Background Color</div>\r\n                <div>\r\n                    <input type='color' value={this.state.bg} onChange={this.bgChange} style={{ backgroundColor: this.state.bg }} />\r\n                </div>\r\n            </div>\r\n            <div className='format'>\r\n                <div className='formattext'>Text Color</div>\r\n                <div>\r\n                    <input type='color' value={this.state.txt} onChange={this.txtChange} style={{ backgroundColor: this.state.txt }} />\r\n                </div>\r\n            </div>\r\n        </div>;\r\n\r\n        const panels = [configuration, options, formatting];\r\n        const tabs = [{ content: 'Configure' }, { content: 'Options' }, { content: 'Formatting' }];\r\n        // const initialState = { selectedTabIndex: 0 };\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <div className='container'>\r\n                    <div>\r\n                        <div className='header'>\r\n                            Data-Driven Parameter Configuration\r\n                            <div className='tooltip'>\r\n                                <svg xmlns='http://www.w3.org/2000/svg' id='Dialogs_x5F_Info' width='15' height='15' viewBox='0 0 15 15'>\r\n                                    <rect id='Line' x='7' y='6' width='1' height='5' fillRule='evenodd' clipRule='evenodd' fill='#666766' />\r\n                                    <rect id='Dot_2_' x='7' y='4' width='1' height='1' fillRule='evenodd' clipRule='evenodd' fill='#666766' />\r\n                                    <path id='Circle' d='M7.5,1C3.9,1,1,3.9,1,7.5S3.9,14,7.5,14 S14,11.1,14,7.5S11.1,1,7.5,1z M7.5,13C4.5,13,2,10.5,2,7.5C2,4.5,4.5,2,7.5,2S13,4.5,13,7.5C13,10.5,10.5,13,7.5,13z' fillRule='evenodd' clipRule='evenodd' fill='#666766' />\r\n                                </svg>\r\n                                <span className='tooltiptext'>\r\n                                    <b>How to Use</b>\r\n                                    <ol>\r\n                                        <li>Select a Tableau parameter to manipulate. This parameter must already exists and must allow \"all\" values.</li>\r\n                                        <li>Select a worksheet with the data you want to use in your parameter.</li>\r\n                                        <li>Select a field to use to populate the parameter. Field data type must match the data type of parameter.</li>\r\n                                    </ol>\r\n                                    <br />\r\n                                    <p>Note: Mac Desktop 2018.3 and lower, please use arrow keys and 'Enter' to select options</p>\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <div className='tabs'>\r\n                            <Tabs activation='automatic' alignment='left' onTabChange={this.tabChange} selectedTabIndex={this.state.selectedTabIndex} tabs={tabs}>\r\n                                {panels[this.state.selectedTabIndex]}\r\n                            </Tabs>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className='footer'>\r\n                        <div className='btncluster'>\r\n                            <Button onClick={this.clearSettings} style={{ marginRight: 'auto' }}>Clear Settings</Button>\r\n                            <Button kind='filledGreen' onClick={this.submit} disabled={!this.state.configured || !this.state.ws_config} style={{ marginLeft: '12px' }}>OK</Button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Configure;\r\n","import * as React from 'react';\r\nimport './style.css';\r\nimport { Button, DropdownSelect } from '@tableau/tableau-ui';\r\nconst tableau = window.tableau;\r\n\r\nlet unregister = [() => { }, () => { }, () => { }, () => { }];\r\n\r\ninterface State {\r\n    allLabel: string,\r\n    applyButton: boolean,\r\n    applyButtonLabel: string,\r\n    bg: string,\r\n    configured: boolean,\r\n    currentVal: any[],\r\n    disabled: boolean,\r\n    firstInit: boolean,\r\n    list: any[],\r\n    multiselect: boolean,\r\n}\r\n\r\nconst NeedsConfiguring: any = { value: 'Parameter needs configuration', displayValue: 'Parameter needs configuration' };\r\nconst Loading: any = { value: 'Loading...', displayValue: 'Loading...' };\r\n\r\nfunction fakeWhiteOverlay(hex: string) {\r\n    const rgb = hexToRgb(hex);\r\n    if (rgb) {\r\n        return `rgb(${Math.min(Math.floor(rgb.r / 2) + 127, 255)}, ${Math.min(Math.floor(rgb.g / 2) + 127, 255)}, ${Math.min(Math.floor(rgb.b / 2) + 127, 255)})`;\r\n    } else {\r\n        return '#ffffff';\r\n    }\r\n}\r\n\r\nfunction hexToRgb(hex: string) {\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? {\r\n        b: parseInt(result[3], 16),\r\n        g: parseInt(result[2], 16),\r\n        r: parseInt(result[1], 16),\r\n    } : null;\r\n}\r\n\r\nclass DataDrivenParameter extends React.Component<any, State> {\r\n    public readonly state: State = {\r\n        allLabel: 'Apply',\r\n        applyButton: false,\r\n        applyButtonLabel: '(All)',\r\n        bg: '#ffffff',\r\n        configured: false,\r\n        currentVal: [Loading],\r\n        disabled: true,\r\n        firstInit: true,\r\n        list: [Loading],\r\n        multiselect: false,\r\n    };\r\n\r\n    // Pops open the configure page\r\n    public configure = (): void => {\r\n        const popupUrl = `${window.location.origin}${process.env.PUBLIC_URL}/#/config`;\r\n        const payload = '';\r\n        tableau.extensions.ui.displayDialogAsync(popupUrl, payload, { height: 610, width: 450 }).then((closePayload: string) => {\r\n            this.setup();\r\n        }).catch((error: any) => {\r\n            if (tableau.extensions.settings.get('configured') !== 'true') {\r\n                this.setState({\r\n                    currentVal: [NeedsConfiguring],\r\n                    disabled: true,\r\n                    list: [NeedsConfiguring],\r\n                });\r\n            }\r\n            switch (error.errorCode) {\r\n                case tableau.ErrorCodes.DialogClosedByUser:\r\n                    console.log('Dialog was closed by user.');\r\n                    break;\r\n                default:\r\n                    console.error(error.message);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Locates the parameter to update\r\n    public findParameter() {\r\n        const settings = tableau.extensions.settings.getAll();\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        dashboard.findParameterAsync(settings.selParam).then((parameter: any) => {\r\n            if (!parameter || parameter.allowableValues.type !== 'all') {\r\n                this.setState({\r\n                    currentVal: [NeedsConfiguring],\r\n                    disabled: true,\r\n                    list: [NeedsConfiguring],\r\n                });\r\n            } else {\r\n                this.getParamData();\r\n                this.resetListeners();\r\n            }\r\n        });\r\n    }\r\n\r\n    // Gets the values from the selected field\r\n    public getParamData = (): void => {\r\n        const settings = tableau.extensions.settings.getAll();\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        const worksheet = dashboard.worksheets.find((ws: any) => ws.name === settings.selWorksheet);\r\n        if (!worksheet) {\r\n            this.setState({\r\n                currentVal: [NeedsConfiguring],\r\n                disabled: true,\r\n                list: [NeedsConfiguring],\r\n            });\r\n        } else {\r\n            worksheet.getSummaryDataAsync({ ignoreSelection: settings.ignoreSelection === 'true' }).then((dataTable: any) => {\r\n                this.populateParam(dataTable);\r\n            });\r\n        }\r\n    }\r\n\r\n    // Pulls domain of selected field\r\n    public populateParam(dataTable: any) {\r\n        const settings = tableau.extensions.settings.getAll();\r\n        const field = dataTable.columns.find((column: any) => column.fieldName === settings.selField);\r\n        this.setState({\r\n            currentVal: [Loading],\r\n            disabled: true,\r\n            list: [Loading],\r\n        });\r\n\r\n        if (!field) {\r\n            this.setState({\r\n                currentVal: [NeedsConfiguring],\r\n                disabled: true,\r\n                list: [NeedsConfiguring],\r\n            });\r\n        } else {\r\n            this.createList(field, dataTable);\r\n        }\r\n    }\r\n\r\n    // Populate list with values from data source\r\n    public createList(field: any, dataTable: any) {\r\n        const settings = tableau.extensions.settings.getAll();\r\n        const displayField = dataTable.columns.find((column: any) => column.fieldName === settings.displayField);\r\n\r\n        let list: any[] = [];\r\n        for (const row of dataTable.data) {\r\n            const value = settings.useFormattedValues === 'true' ? row[field.index].formattedValue : row[field.index].value;\r\n            let displayValue = value;\r\n            if (displayField && settings.showDisplayValues === 'true') {\r\n                displayValue = row[displayField.index].formattedValue\r\n            }\r\n            list.push({\r\n                displayValue,\r\n                value,\r\n            });\r\n        }\r\n\r\n        // Remove duplicates\r\n        list = list.filter((item, index, array) => array.indexOf(array.find(i => i.value === item.value)) === index);\r\n\r\n        if (settings.dataType && (settings.dataType === 'int' || settings.dataType === 'float')) {\r\n            // Convert to numbers for correct sort\r\n            list = list.map((item) => ({ value: Number(item.value), displayValue: item.displayValue }))\r\n            // Sort according to settings (numerical)\r\n            if (settings.sort && settings.sort === 'desc') {\r\n                list.sort((a, b) => b.value - a.value);\r\n            } else {\r\n                list.sort((a, b) => a.value - b.value);\r\n            }\r\n            if (settings.dataType === 'float') {\r\n                list = list.map((item) => ({ value: item.value.toLocaleString(tableau.extensions.environment.locale), displayValue: item.displayValue }));\r\n            }\r\n        } else {\r\n            // Sort according to settings\r\n            if (settings.sort && settings.sort === 'desc') {\r\n                list.sort((a, b) => a.value < b.value ? 1 : -1);\r\n            } else {\r\n                list.sort((a, b) => a.value > b.value ? 1 : -1);\r\n            }\r\n        }\r\n\r\n        // Add '(All)' according to settings\r\n        if (settings.includeAllValue === 'true') {\r\n            list.unshift({ value: this.state.allLabel, displayValue: this.state.allLabel });\r\n        }\r\n\r\n        this.setState({\r\n            list,\r\n        }, this.setCurrentValue);\r\n\r\n    }\r\n\r\n    // Determine whether to use current param value or first value of list based on settings\r\n    public setCurrentValue = (): void => {\r\n        const settings = tableau.extensions.settings.getAll();\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        const list = this.state.list;\r\n        let currentVal: any[] = [];\r\n        dashboard.findParameterAsync(settings.selParam).then((parameter: any) => {\r\n            if ((this.state.firstInit && settings.autoUpdate === 'true')) {\r\n                // Then push new values\r\n                currentVal = [(settings.includeAllValue === 'true' ? list[1].value : list[0].value)];\r\n            } else {\r\n                // Then match parameter value\r\n                if (settings.multiselect === 'true') {\r\n                    const tablist = [];\r\n                    for (const value of parameter.currentValue.value.split(settings.delimiter)) {\r\n                        if (list.find((v: any) => v.value.toString() === value || v.value === value)) {\r\n                            tablist.push(value);\r\n                        }\r\n                    }\r\n                    currentVal = tablist;\r\n                } else {\r\n                    if (list.find((v: any) => v.value.toString() === parameter.currentValue.value || v.value === parameter.currentValue.value)) {\r\n                        currentVal = [parameter.currentValue.value];\r\n                    }\r\n                }\r\n                if (currentVal.length === 0) {\r\n                    // If no match, use first value\r\n                    currentVal = [(settings.includeAllValue === 'true' ? list[1].value : list[0].value)];\r\n                }\r\n            }\r\n\r\n            parameter.changeValueAsync(settings.multiselect ? currentVal.join(settings.delimiter) : currentVal.toString()).then(console.log);\r\n\r\n            this.setState({\r\n                disabled: false,\r\n                firstInit: false,\r\n                currentVal\r\n            });\r\n        });\r\n    }\r\n\r\n    // Adds event listener to worksheet and parameter\r\n    public async registerListeners() {\r\n        const settings = tableau.extensions.settings.getAll();\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        const worksheet = dashboard.worksheets.find((ws: any) => ws.name === settings.selWorksheet);\r\n        dashboard.findParameterAsync(settings.selParam).then((parameter: any) => {\r\n            if (!worksheet || !parameter) {\r\n                this.setState({\r\n                    currentVal: [NeedsConfiguring],\r\n                    disabled: true,\r\n                    list: [NeedsConfiguring],\r\n                });\r\n            } else {\r\n                if (!settings.updateOnSelectionFix || settings.updateOnSelectionFix === 'true') {\r\n                    unregister[0] = worksheet.addEventListener(tableau.TableauEventType.FilterChanged, this.getParamData);\r\n                    unregister[1] = worksheet.addEventListener(tableau.TableauEventType.MarkSelectionChanged, this.getParamData);\r\n                }\r\n                if (settings.matchParam === 'true') {\r\n                    unregister[2] = parameter.addEventListener(tableau.TableauEventType.ParameterChanged, this.matchListener);\r\n                }\r\n                if (settings.listenParam === 'true') {\r\n                    dashboard.findParameterAsync(settings.listenParamName).then((updateParameter: any) => {\r\n                        unregister[3] = updateParameter.addEventListener(tableau.TableauEventType.ParameterChanged, this.getParamData);\r\n                    })\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public matchListener = (): void => {\r\n        const settings = tableau.extensions.settings.getAll();\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        dashboard.findParameterAsync(settings.selParam).then((parameter: any) => {\r\n            const currentVal = this.state.multiselect ? parameter.currentValue.value.split(settings.delimiter) : [parameter.currentValue.value];\r\n            this.setState({\r\n                currentVal,\r\n            });\r\n        });\r\n    }\r\n\r\n    public resetListeners() {\r\n        for (let fn of unregister) {\r\n            fn();\r\n        }\r\n        this.registerListeners();\r\n    }\r\n\r\n    // Updates the parameter based on selection in Data-Driven Parameter\r\n    public updateParam = (e: any) => {\r\n        const settings = tableau.extensions.settings.getAll();\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        const values: any = [];\r\n        let newValue: any;\r\n        for (const opt of e.target.options) {\r\n            if (opt.selected) {\r\n                values.push(opt.value);\r\n            }\r\n        }\r\n        this.setState({ currentVal: values });\r\n        newValue = values.join(settings.delimiter);\r\n        dashboard.findParameterAsync(settings.selParam).then((parameter: any) => {\r\n            if (!parameter) {\r\n                this.setState({\r\n                    currentVal: [NeedsConfiguring],\r\n                    disabled: true,\r\n                    list: [NeedsConfiguring],\r\n                });\r\n            } else {\r\n                if (settings.applyButton === 'false') {\r\n                    parameter.changeValueAsync(newValue).then(console.log);\r\n                }\r\n            }\r\n\r\n            if (settings.updateOnChange === 'true') {\r\n                // Don't update list if on multi-select, ends up being confusing.\r\n                if (!this.state.multiselect) {\r\n                    this.getParamData();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public apply = (): void => {\r\n        const settings = tableau.extensions.settings.getAll();\r\n        const dashboard = tableau.extensions.dashboardContent.dashboard;\r\n        dashboard.findParameterAsync(settings.selParam).then((parameter: any) => {\r\n            parameter.changeValueAsync(this.state.currentVal.join(settings.delimiter)).then(console.log);\r\n        });\r\n    }\r\n\r\n    public setup() {\r\n        const settings = tableau.extensions.settings.getAll();\r\n        document.body.style.backgroundColor = settings.bg;\r\n        document.body.style.color = settings.txt;\r\n        this.setState({\r\n            allLabel: settings.allLabel || '(All)',\r\n            applyButton: settings.applyButton === 'true' || false,\r\n            applyButtonLabel: settings.applyButtonLabel || 'Apply',\r\n            bg: (settings.bg ? fakeWhiteOverlay(settings.bg) : '#ffffff'),\r\n            configured: true,\r\n            multiselect: settings.multiselect === 'true' || false,\r\n        });\r\n        this.findParameter();\r\n    }\r\n\r\n    // Once we have mounted, we call to initialize\r\n    public componentWillMount() {\r\n        tableau.extensions.initializeAsync({ configure: this.configure }).then(() => {\r\n            const settings = tableau.extensions.settings.getAll();\r\n            if (settings.configured === 'true') {\r\n                this.setup();\r\n            } else {\r\n                this.setState({\r\n                    currentVal: [NeedsConfiguring],\r\n                    disabled: true,\r\n                    list: [NeedsConfiguring],\r\n                });\r\n                this.configure();\r\n            }\r\n        });\r\n    }\r\n\r\n    public render() {\r\n        const multi = <div style={{ flexDirection: 'column' }}>\r\n            <select multiple={true} id='multi-select-parameter' className='parameter' value={this.state.currentVal} onChange={this.updateParam} disabled={this.state.disabled} style={{ backgroundColor: this.state.bg, color: 'inherit' }}>\r\n                {this.state.list.map((option: any) => (<option key={option.value || option.value} value={option.value}>{option.displayValue}</option>))}\r\n            </select>\r\n            <Button kind='filled' onClick={this.apply} style={{ display: (this.state.applyButton ? 'block' : 'none'), marginTop: '6px', width: '60px', height: '20px', marginLeft: 'auto' }}>{this.state.applyButtonLabel}</Button>\r\n        </div>\r\n\r\n        const single = <div>\r\n            <DropdownSelect id='single-select-parameter' className='singleParameter' disabled={this.state.disabled || this.state.multiselect} kind='outline' onChange={this.updateParam} value={this.state.currentVal[0]} style={{ backgroundColor: this.state.bg, color: 'inherit', fontSize: '11px' }}>\r\n                {this.state.list.map((option: any) => <option key={option.value} value={option.value}>{option.displayValue}</option>)}\r\n            </DropdownSelect>\r\n        </div>\r\n\r\n        return (\r\n            <>\r\n                {this.state.multiselect ? multi : single}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DataDrivenParameter;\r\n","import * as React from 'react';\r\nimport './home.css';\r\n\r\nclass Home extends React.Component<any, any> {\r\n    public render() {\r\n        return (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<div className='icontainer'>\r\n\t\t\t\t\t<div className='box'>\r\n\t\t\t\t\t\t<div className='left'>\r\n\t\t\t\t\t\t\t<h1 className='iheader'>Data-Driven Parameters</h1>\r\n\t\t\t\t\t\t\t<span className='tagline'>Automatically update your parameters based on your data!</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='right'>\r\n\t\t\t\t\t\t\t<h4 className='big'>What is it?</h4>\r\n\t\t\t\t\t\t\t<p>This extension allows you to add a parameter to a Tableau dashboard whose domain is based on your data. Added a new product line? No longer do you need to manually edit the parameter to update it, with this extension your parameter values\r\n\t\t\t\t\t\t\tupdate automatically!</p>\r\n\t\t\t\t\t\t\t<h4 className='big'>Using the Extension</h4>\r\n\t\t\t\t\t\t\t<ol>\r\n\t\t\t\t\t\t\t\t<li>Create an open input (All) parameter with a data type matching the field you want to use to populate it.</li>\r\n\t\t\t\t\t\t\t\t<li>Drag in a new Extension object to your dashboard.</li>\r\n\t\t\t\t\t\t\t\t<li>Find the manifest (.trex) file you downloaded above.</li>\r\n\t\t\t\t\t\t\t\t<li>Select the parameter you created above for the extension to manipulate.</li>\r\n\t\t\t\t\t\t\t\t<li>Select the worksheet that holds the field you want to base your parameter on.</li>\r\n\t\t\t\t\t\t\t\t<li>Select the field you want to base your parameter on.</li>\r\n\t\t\t\t\t\t\t\t<li>Optional: Configure your text and background colors.</li>\r\n\t\t\t\t\t\t\t\t<li>Click 'OK'.</li>\r\n\t\t\t\t\t\t\t</ol>\r\n\t\t\t\t\t\t\t<p><b>Note:</b> You can add as many instances of this extension as you like!</p>\r\n\t\t\t\t\t\t\t<div className='gh'>\r\n\t\t\t\t\t\t\t\tGet this extension and more in the <a href='https://extensiongallery.tableau.com/'>Extension Gallery</a>.\r\n\t\t\t\t\t\t\t\t{/* <a href='https://github.com/tableau/extension-data-driven-parameters'>View on GitHub</a> */}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Home;","import 'react-app-polyfill/ie11';\r\nimport * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport { HashRouter, Route } from 'react-router-dom';\r\nimport Configure from './Configure';\r\nimport DataDrivenParameter from './DataDrivenParameter';\r\nimport Home from './Home';\r\n\r\ndeclare global {\r\n  interface Window { tableau: any; }\r\n}\r\n\r\nconst PrimaryLayout = () => (\r\n  <React.Fragment>\r\n    <Route path='/' exact={true} component={Home} />\r\n    <Route path='/parameter' component={DataDrivenParameter} />\r\n    <Route path='/config' component={Configure} />\r\n  </React.Fragment>\r\n)\r\n\r\nclass App extends React.Component {\r\n  public render() {\r\n    return (\r\n      <HashRouter>\r\n        <PrimaryLayout />\r\n      </HashRouter>\r\n    )\r\n  }\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('container'));\r\n"],"sourceRoot":""}